<form [formGroup]="estateForm" (ngSubmit)="onSubmit()">
    <div class="estate-create">

        <div class="estate-create__file-upload">
            <div class="estate-create__field">
                <app-file-upload (files)="onFileUpload($event)" (isFilesDeleted)="onDeleteFiles()">
                </app-file-upload>
            </div>
        </div>

        <div class="estate-create__estate-data">
            <div class="estate-create__field">
                <mat-form-field>
                    <mat-label>Вид на имота</mat-label>
                    <mat-select formControlName='estateType'>
                        <mat-option *ngFor="let estateType of (estateTypes | sortBy: 'estateTypes')"
                            [value]='estateType.type'>
                            {{estateType.type}}
                        </mat-option>
                    </mat-select>

                    <mat-error *ngFor="let error of estateForm.controls.estateType.errors | error">
                        {{ error }}
                    </mat-error>
                </mat-form-field>
            </div>

            <div class="estate-create__field">
                <mat-form-field>
                    <mat-label>Етаж</mat-label>
                    <mat-select formControlName='floor'>
                        <mat-option *ngFor="let floor of (floors | sortBy: 'floors')" [value]='floor.number'>
                            {{floor.number}}
                        </mat-option>
                    </mat-select>

                    <mat-error *ngFor="let error of estateForm.controls.floor.errors | error">
                        {{ error }}
                    </mat-error>
                </mat-form-field>
            </div>

            <div class="estate-create__field">
                <mat-form-field>
                    <mat-label>Вид на обява</mat-label>
                    <mat-select formControlName='adType'>
                        <mat-option *ngFor="let adType of adTypes" [value]='adType.type'>
                            {{adType.type}}
                        </mat-option>
                    </mat-select>

                    <mat-error *ngFor="let error of estateForm.controls.adType.errors | error">
                        {{ error }}
                    </mat-error>
                </mat-form-field>
            </div>


            <div class="estate-create__field">
                <mat-form-field>
                    <input type="number" formControlName="builtUpArea" matInput placeholder="Квадрати">

                    <mat-icon matSuffix>square_foot</mat-icon>

                    <mat-error *ngFor="let error of estateForm.controls.builtUpArea.errors | error">
                        {{ error }}
                    </mat-error>
                </mat-form-field>
            </div>

            <div class="estate-create__field">
                <mat-form-field>
                    <input type="number" formControlName="pureArea" matInput placeholder="Чисти квадрати">

                    <mat-icon matSuffix>square_foot</mat-icon>

                    <mat-error *ngFor="let error of estateForm.controls.pureArea.errors | error">
                        {{ error }}
                    </mat-error>
                </mat-form-field>
            </div>

            <div class="estate-create__field">
                <mat-form-field>
                    <input type="number" formControlName="price" matInput placeholder="Цена">

                    <mat-icon matSuffix>attach_money</mat-icon>

                    <mat-error *ngFor="let error of estateForm.controls.price.errors | error">
                        {{ error }}
                    </mat-error>
                </mat-form-field>
            </div>


            <div class="estate-create__field description">
                <mat-form-field>
                    <textarea matInput formControlName="description" placeholder="Описание на имота"></textarea>

                    <mat-error *ngFor="let error of estateForm.controls.description.errors | error">
                        {{ error }}
                    </mat-error>
                </mat-form-field>
            </div>

            <div class="estate-create__field features">
                <mat-label class="features-label">Особености</mat-label>
                <div class="feature-checkbox" *ngFor="let estateFeature of estateFeatures">
                    <mat-checkbox [(ngModel)]="estateFeature.isChecked" [ngModelOptions]="{standalone: true}">
                        {{ estateFeature.feature }}
                    </mat-checkbox>
                </div>
            </div>
        </div>
    </div>

    <div class="actions">
        <button type="submit" mat-raised-button color="primary">Потвърди</button>
    </div>
</form>


<app-spinner></app-spinner>